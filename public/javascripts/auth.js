new Vue({
    el:"#auth",
    data:{
        user:{userName:'',password:''},
        login:'',
        buttonText:'Login'  
    },
    methods:{
        handleLogin(){
            this.buttonText='Loading...'
            console.log(this.user);
            axios({method:"post",url:"/backend/handleLogin",data:{user:this.user}})
            .then(r=>{
                console.log(r.data.role)
               window.localStorage.setItem('Name',JSON.stringify(r.data.user));
               window.localStorage.setItem('Role',JSON.stringify(r.data.role));
               if(r.data.status==400){
                   window.location="/backend/login";
                    this.login='false'
               }
               else{
                   window.location="/backend/posts"
                   this.login='true'
               }
            })
            .catch(e=>{
                console.log(e)
            })
        }
    }
})